<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CryptoDen | Settings</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        /* ==================== RESET & BASE ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 50%, #d9e2ec 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* ==================== ANIMATED BACKGROUND ==================== */
        .bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }
        
        /* Animated Chart Lines */
        .chart-lines {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0.15;
        }
        
        .chart-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3b82f6, #06b6d4, transparent);
            animation: chartMove 8s ease-in-out infinite;
        }
        
        .chart-line:nth-child(1) { top: 20%; width: 60%; left: -10%; animation-delay: 0s; }
        .chart-line:nth-child(2) { top: 35%; width: 80%; left: 20%; animation-delay: 1s; }
        .chart-line:nth-child(3) { top: 50%; width: 70%; left: -5%; animation-delay: 2s; }
        .chart-line:nth-child(4) { top: 65%; width: 90%; left: 10%; animation-delay: 3s; }
        .chart-line:nth-child(5) { top: 80%; width: 50%; left: 30%; animation-delay: 4s; }
        
        @keyframes chartMove {
            0%, 100% { transform: translateX(-20%) scaleY(1); opacity: 0.3; }
            50% { transform: translateX(20%) scaleY(2); opacity: 0.6; }
        }
        
        /* Floating Crypto Coins */
        .floating-coins {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .coin {
            position: absolute;
            opacity: 0.12;
            animation: float 20s ease-in-out infinite;
        }
        
        .coin svg {
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }
        
        .coin:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; }
        .coin:nth-child(2) { top: 25%; right: 10%; animation-delay: 2s; }
        .coin:nth-child(3) { top: 45%; left: 8%; animation-delay: 4s; }
        .coin:nth-child(4) { top: 60%; right: 5%; animation-delay: 6s; }
        .coin:nth-child(5) { top: 75%; left: 15%; animation-delay: 8s; }
        .coin:nth-child(6) { top: 15%; right: 25%; animation-delay: 1s; }
        .coin:nth-child(7) { top: 85%; right: 20%; animation-delay: 3s; }
        .coin:nth-child(8) { top: 35%; left: 25%; animation-delay: 5s; }
        
        @keyframes float {
            0%, 100% { 
                transform: translateY(0) rotate(0deg) scale(1); 
            }
            25% { 
                transform: translateY(-20px) rotate(5deg) scale(1.05); 
            }
            50% { 
                transform: translateY(-10px) rotate(-3deg) scale(1.02); 
            }
            75% { 
                transform: translateY(-25px) rotate(3deg) scale(1.08); 
            }
        }
        
        /* Glowing Particles */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            border-radius: 50%;
            animation: sparkle 4s ease-in-out infinite;
        }
        
        .particle:nth-child(1) { top: 15%; left: 20%; animation-delay: 0s; }
        .particle:nth-child(2) { top: 30%; right: 15%; animation-delay: 0.5s; }
        .particle:nth-child(3) { top: 50%; left: 10%; animation-delay: 1s; }
        .particle:nth-child(4) { top: 70%; right: 25%; animation-delay: 1.5s; }
        .particle:nth-child(5) { top: 85%; left: 30%; animation-delay: 2s; }
        .particle:nth-child(6) { top: 20%; right: 35%; animation-delay: 2.5s; }
        .particle:nth-child(7) { top: 40%; left: 40%; animation-delay: 3s; }
        .particle:nth-child(8) { top: 65%; right: 10%; animation-delay: 3.5s; }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.5); }
        }
        
        /* ==================== MAIN CONTENT ==================== */
        .main-container {
            position: relative;
            z-index: 1;
            padding: 20px;
            padding-bottom: 120px;
            max-width: 500px;
            margin: 0 auto;
        }
        
        /* Header */
        .header {
            text-align: center;
            padding: 30px 0;
            animation: fadeInDown 0.6s ease;
        }
        
        .logo {
            font-size: 48px;
            margin-bottom: 10px;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #1e3a5f, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }
        
        .header p {
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
        }
        
        /* Glass Card */
        .card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 16px;
            overflow: hidden;
            animation: fadeInUp 0.6s ease;
            animation-fill-mode: both;
        }
        
        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }
        .card:nth-child(4) { animation-delay: 0.4s; }
        .card:nth-child(5) { animation-delay: 0.5s; }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Card Header */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 20px;
            cursor: pointer;
            transition: background 0.3s ease;
            user-select: none;
        }
        
        .card-header:hover {
            background: rgba(59, 130, 246, 0.05);
        }
        
        .card-header:active {
            background: rgba(59, 130, 246, 0.1);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .card-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .card-title h3 {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .card-title .subtitle {
            font-size: 12px;
            color: #64748b;
            margin-top: 2px;
        }
        
        .card-arrow {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(59, 130, 246, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #3b82f6;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .card.open .card-arrow {
            transform: rotate(180deg);
            background: #3b82f6;
            color: white;
        }
        
        /* Card Content */
        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0 20px;
        }
        
        .card.open .card-content {
            max-height: 600px;
            padding: 0 20px 20px;
        }
        
        /* Status Badge */
        .status-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .status-badge.success {
            background: rgba(34, 197, 94, 0.15);
            color: #16a34a;
        }
        
        .status-badge.warning {
            background: rgba(245, 158, 11, 0.15);
            color: #d97706;
        }
        
        .status-badge.error {
            background: rgba(239, 68, 68, 0.15);
            color: #dc2626;
        }
        
        /* Input Group */
        .input-group {
            margin-bottom: 16px;
        }
        
        .input-group label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #475569;
            margin-bottom: 8px;
        }
        
        .input-wrapper {
            position: relative;
        }
        
        .input-wrapper input {
            width: 100%;
            padding: 14px 16px;
            padding-right: 50px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 15px;
            color: #1e293b;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }
        
        .input-wrapper input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
        }
        
        .input-wrapper input::placeholder {
            color: #94a3b8;
        }
        
        .input-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.3s;
        }
        
        .input-toggle:hover {
            opacity: 1;
        }
        
        /* Toggle Buttons */
        .toggle-group {
            display: flex;
            gap: 10px;
            margin-top: 16px;
        }
        
        .toggle-btn {
            flex: 1;
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .toggle-btn:hover {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }
        
        .toggle-btn.active {
            border-color: #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(6, 182, 212, 0.1));
            color: #3b82f6;
        }
        
        .toggle-btn.active.danger {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }
        
        /* Coins Grid */
        .coins-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .coin-btn {
            padding: 14px 8px;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }
        
        .coin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .coin-btn.active {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }
        
        .coin-btn .coin-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 12px;
            color: white;
        }
        
        .coin-btn .coin-name {
            font-size: 12px;
            font-weight: 600;
            color: #475569;
        }
        
        .coin-btn .coin-status {
            font-size: 10px;
            color: #94a3b8;
        }
        
        .coin-btn.active .coin-status {
            color: #22c55e;
        }
        
        /* Coin Colors */
        .coin-btc { background: linear-gradient(135deg, #f7931a, #ffab40); }
        .coin-eth { background: linear-gradient(135deg, #627eea, #8c9eff); }
        .coin-bnb { background: linear-gradient(135deg, #f3ba2f, #ffd54f); }
        .coin-sol { background: linear-gradient(135deg, #9945ff, #14f195); }
        .coin-xrp { background: linear-gradient(135deg, #23292f, #546e7a); }
        .coin-ada { background: linear-gradient(135deg, #0033ad, #1e88e5); }
        .coin-doge { background: linear-gradient(135deg, #c2a633, #ffca28); }
        .coin-link { background: linear-gradient(135deg, #2a5ada, #5c6bc0); }
        .coin-avax { background: linear-gradient(135deg, #e84142, #ff5252); }
        
        /* Slider */
        .slider-group {
            margin-bottom: 20px;
        }
        
        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .slider-label {
            font-size: 14px;
            font-weight: 600;
            color: #475569;
        }
        
        .slider-value {
            font-size: 16px;
            font-weight: 700;
            color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
            padding: 4px 12px;
            border-radius: 8px;
        }
        
        .slider-wrapper {
            position: relative;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: visible;
        }
        
        .slider-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #06b6d4);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        input[type="range"] {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            opacity: 0;
            cursor: pointer;
            -webkit-appearance: none;
        }
        
        .slider-thumb {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            background: white;
            border: 3px solid #3b82f6;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
            pointer-events: none;
        }
        
        .slider-wrapper:hover .slider-thumb {
            transform: translate(-50%, -50%) scale(1.1);
        }
        
        /* Warning Box */
        .warning-box {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 14px 16px;
            margin-top: 16px;
            font-size: 13px;
            color: #dc2626;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            animation: shake 0.5s ease;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .warning-box.hidden {
            display: none;
        }
        
        /* Start Button */
        .start-btn-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: linear-gradient(to top, rgba(245, 247, 250, 1), rgba(245, 247, 250, 0));
            z-index: 100;
        }
        
        .start-btn {
            width: 100%;
            max-width: 460px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 18px 32px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border: none;
            border-radius: 16px;
            font-size: 18px;
            font-weight: 700;
            color: white;
            cursor: pointer;
            box-shadow: 
                0 8px 24px rgba(34, 197, 94, 0.4),
                0 2px 8px rgba(34, 197, 94, 0.2);
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease 0.6s both;
        }
        
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 32px rgba(34, 197, 94, 0.5),
                0 4px 12px rgba(34, 197, 94, 0.3);
        }
        
        .start-btn:active {
            transform: translateY(0);
        }
        
        .start-btn .btn-icon {
            font-size: 24px;
            animation: rocketBounce 2s ease-in-out infinite;
        }
        
        @keyframes rocketBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        /* Info Text */
        .info-text {
            font-size: 12px;
            color: #94a3b8;
            text-align: center;
            margin-top: 12px;
            padding: 0 20px;
        }
        
        /* Responsive */
        @media (max-width: 380px) {
            .coins-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header h1 {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-container">
        <!-- Chart Lines -->
        <div class="chart-lines">
            <div class="chart-line"></div>
            <div class="chart-line"></div>
            <div class="chart-line"></div>
            <div class="chart-line"></div>
            <div class="chart-line"></div>
        </div>
        
        <!-- Floating Coins -->
        <div class="floating-coins">
            <!-- Bitcoin -->
            <div class="coin" style="width: 60px;">
                <svg viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#f7931a"/>
                    <path d="M22.5 14.2c.3-2-1.2-3-3.3-3.8l.7-2.7-1.6-.4-.7 2.7c-.4-.1-.8-.2-1.3-.3l.7-2.7-1.6-.4-.7 2.7c-.3-.1-.7-.2-1-.2l-2.3-.6-.4 1.7s1.2.3 1.2.3c.7.2.8.6.8 1l-.8 3.2c0 .1.1.1.1.2h-.1l-1.1 4.5c-.1.2-.3.5-.8.4 0 0-1.2-.3-1.2-.3l-.8 1.9 2.1.5c.4.1.8.2 1.2.3l-.7 2.8 1.6.4.7-2.8c.4.1.9.2 1.3.3l-.7 2.7 1.6.4.7-2.8c2.9.6 5.1.3 6-2.3.7-2.1 0-3.3-1.5-4 1.1-.3 1.9-1 2.1-2.5zm-3.8 5.3c-.5 2.1-4 1-5.1.7l.9-3.7c1.1.3 4.8.8 4.2 3zm.5-5.4c-.5 1.9-3.4.9-4.3.7l.8-3.3c.9.2 4 .6 3.5 2.6z" fill="white"/>
                </svg>
            </div>
            
            <!-- Ethereum -->
            <div class="coin" style="width: 50px;">
                <svg viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#627eea"/>
                    <path d="M16 4v8.9l7.5 3.3L16 4z" fill="white" fill-opacity="0.6"/>
                    <path d="M16 4l-7.5 12.2 7.5-3.3V4z" fill="white"/>
                    <path d="M16 21.9v6.1l7.5-10.4-7.5 4.3z" fill="white" fill-opacity="0.6"/>
                    <path d="M16 28v-6.1l-7.5-4.3L16 28z" fill="white"/>
                    <path d="M16 20.5l7.5-4.3-7.5-3.3v7.6z" fill="white" fill-opacity="0.2"/>
                    <path d="M8.5 16.2l7.5 4.3v-7.6l-7.5 3.3z" fill="white" fill-opacity="0.6"/>
                </svg>
            </div>
            
            <!-- Solana -->
            <div class="coin" style="width: 45px;">
                <svg viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="url(#sol-gradient)"/>
                    <defs>
                        <linearGradient id="sol-gradient" x1="0" y1="0" x2="32" y2="32">
                            <stop stop-color="#9945ff"/>
                            <stop offset="1" stop-color="#14f195"/>
                        </linearGradient>
                    </defs>
                    <path d="M9 20.5l2.5-2.5h11l-2.5 2.5H9zm0-4.5l2.5-2.5h11L20 16H9zm13.5-4.5l-2.5 2.5h-11l2.5-2.5h11z" fill="white"/>
                </svg>
            </div>
            
            <!-- BNB -->
            <div class="coin" style="width: 55px;">
                <svg viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#f3ba2f"/>
                    <path d="M16 6l3 3-5 5-3-3 5-5zm-6 6l3 3-3 3-3-3 3-3zm12 0l3 3-3 3-3-3 3-3zm-6 6l3 3-5 5-3-3 5-5z" fill="white"/>
                </svg>
            </div>
            
            <!-- XRP -->
            <div class="coin" style="width: 40px;">
                <svg viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#23292f"/>
                    <path d="M10 10h2.5l3.5 4.5L19.5 10H22l-5 6.5v.5l5 6.5h-2.5L16 19l-3.5 4.5H10l5-6.5v-.5L10 10z" fill="white"/>
                </svg>
            </div>
            
            <!-- Extra coins for depth -->
            <div class="coin" style="width: 35px;">
                <svg viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#0033ad"/>
                    <circle cx="16" cy="16" r="8" fill="white" fill-opacity="0.3"/>
                </svg>
            </div>
            
            <div class="coin" style="width: 42px;">
                <svg viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#c2a633"/>
                    <text x="16" y="20" text-anchor="middle" fill="white" font-size="10" font-weight="bold">√ê</text>
                </svg>
            </div>
            
            <div class="coin" style="width: 38px;">
                <svg viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#e84142"/>
                    <path d="M16 8l6 10H10l6-10zm0 16l-6-10h12l-6 10z" fill="white"/>
                </svg>
            </div>
        </div>
        
        <!-- Particles -->
        <div class="particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-container">
        <!-- Header -->
        <div class="header">
            <div class="logo">ü§ñ</div>
            <h1>CryptoDen</h1>
            <p>Professional AI Trading Bot</p>
        </div>
        
        <!-- API Keys Card -->
        <div class="card" id="card-api">
            <div class="card-header" onclick="toggleCard('api')">
                <div class="card-title">
                    <div class="card-icon">üîê</div>
                    <div>
                        <h3>API –ö–ª—é—á–∏ <span class="status-badge warning" id="api-status">–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ</span></h3>
                        <div class="subtitle">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Bybit</div>
                    </div>
                </div>
                <div class="card-arrow">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="input-group">
                    <label>API Key</label>
                    <div class="input-wrapper">
                        <input type="password" id="api-key" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à API –∫–ª—é—á">
                        <button class="input-toggle" onclick="togglePassword('api-key')">üëÅÔ∏è</button>
                    </div>
                </div>
                <div class="input-group">
                    <label>API Secret</label>
                    <div class="input-wrapper">
                        <input type="password" id="api-secret" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Secret">
                        <button class="input-toggle" onclick="togglePassword('api-secret')">üëÅÔ∏è</button>
                    </div>
                </div>
                <div class="toggle-group">
                    <button class="toggle-btn active" id="btn-testnet" onclick="setNetwork('testnet')">
                        üß™ Testnet
                    </button>
                    <button class="toggle-btn" id="btn-mainnet" onclick="setNetwork('mainnet')">
                        üí∞ Mainnet
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Coins Card -->
        <div class="card" id="card-coins">
            <div class="card-header" onclick="toggleCard('coins')">
                <div class="card-title">
                    <div class="card-icon">ü™ô</div>
                    <div>
                        <h3>–ú–æ–Ω–µ—Ç—ã</h3>
                        <div class="subtitle" id="coins-count">–í—ã–±—Ä–∞–Ω–æ: 7 –∏–∑ 9</div>
                    </div>
                </div>
                <div class="card-arrow">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="coins-grid" id="coins-grid"></div>
                <p class="info-text">–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –±—ç–∫—Ç–µ—Å—Ç–∞ 2022-2025</p>
            </div>
        </div>
        
        <!-- Risk Management Card -->
        <div class="card" id="card-risk">
            <div class="card-header" onclick="toggleCard('risk')">
                <div class="card-title">
                    <div class="card-icon">üí∞</div>
                    <div>
                        <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏</h3>
                        <div class="subtitle">–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π –∏ –ª–∏–º–∏—Ç—ã</div>
                    </div>
                </div>
                <div class="card-arrow">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="slider-group">
                    <div class="slider-header">
                        <span class="slider-label">–†–∞–∑–º–µ—Ä —Å–¥–µ–ª–∫–∏ –æ—Ç –±–∞–ª–∞–Ω—Å–∞</span>
                        <span class="slider-value" id="risk-value">15%</span>
                    </div>
                    <div class="slider-wrapper">
                        <div class="slider-fill" id="risk-fill" style="width: 50%"></div>
                        <div class="slider-thumb" id="risk-thumb" style="left: 50%"></div>
                        <input type="range" id="risk-slider" min="5" max="25" value="15" oninput="updateSlider('risk')">
                    </div>
                </div>
                <div class="slider-group">
                    <div class="slider-header">
                        <span class="slider-label">–ú–∞–∫—Å–∏–º—É–º –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫</span>
                        <span class="slider-value" id="trades-value">6</span>
                    </div>
                    <div class="slider-wrapper">
                        <div class="slider-fill" id="trades-fill" style="width: 55%"></div>
                        <div class="slider-thumb" id="trades-thumb" style="left: 55%"></div>
                        <input type="range" id="trades-slider" min="1" max="10" value="6" oninput="updateSlider('trades')">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AI Settings Card -->
        <div class="card" id="card-ai">
            <div class="card-header" onclick="toggleCard('ai')">
                <div class="card-title">
                    <div class="card-icon">üß†</div>
                    <div>
                        <h3>AI –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div class="subtitle">Claude Sonnet 4.5</div>
                    </div>
                </div>
                <div class="card-arrow">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="toggle-group">
                    <button class="toggle-btn active" id="btn-ai-on" onclick="setAI(true)">
                        ‚úÖ AI –í–∫–ª—é—á—ë–Ω
                    </button>
                    <button class="toggle-btn" id="btn-ai-off" onclick="setAI(false)">
                        ‚ùå –¢–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
                    </button>
                </div>
                <div class="slider-group" style="margin-top: 20px;">
                    <div class="slider-header">
                        <span class="slider-label">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å AI</span>
                        <span class="slider-value" id="confidence-value">60%</span>
                    </div>
                    <div class="slider-wrapper">
                        <div class="slider-fill" id="confidence-fill" style="width: 50%"></div>
                        <div class="slider-thumb" id="confidence-thumb" style="left: 50%"></div>
                        <input type="range" id="confidence-slider" min="30" max="90" value="60" oninput="updateSlider('confidence')">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Trading Mode Card -->
        <div class="card" id="card-mode">
            <div class="card-header" onclick="toggleCard('mode')">
                <div class="card-title">
                    <div class="card-icon">üìä</div>
                    <div>
                        <h3>–†–µ–∂–∏–º —Ç–æ—Ä–≥–æ–≤–ª–∏</h3>
                        <div class="subtitle" id="mode-subtitle">Paper Trading</div>
                    </div>
                </div>
                <div class="card-arrow">‚ñº</div>
            </div>
            <div class="card-content">
                <div class="toggle-group">
                    <button class="toggle-btn active" id="btn-paper" onclick="setMode('paper')">
                        üìù Paper Trading
                    </button>
                    <button class="toggle-btn" id="btn-live" onclick="setMode('live')">
                        üí∞ Live Trading
                    </button>
                </div>
                <div class="warning-box hidden" id="live-warning">
                    <span>‚ö†Ô∏è</span>
                    <span>–í —Ä–µ–∂–∏–º–µ LIVE –±–æ—Ç –±—É–¥–µ—Ç —Ç–æ—Ä–≥–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–µ–Ω—å–≥–∞–º–∏! –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ —Ä–∏—Å–∫–∏.</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Start Button -->
    <div class="start-btn-container">
        <button class="start-btn" id="start-btn" onclick="startBot()">
            <span class="btn-icon">üöÄ</span>
            <span>–ó–ê–ü–£–°–¢–ò–¢–¨ –ë–û–¢–ê</span>
        </button>
    </div>

    <script>
        // Telegram WebApp Init
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();
        
        // Apply Telegram theme
        document.body.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#f5f7fa');
        
        // Settings State
        let settings = {
            bybit_api_key: "",
            bybit_api_secret: "",
            bybit_testnet: true,
            coins: {
                BTC: true, ETH: true, BNB: true,
                SOL: true, XRP: true, ADA: true,
                DOGE: true, LINK: false, AVAX: false
            },
            risk_percent: 15,
            max_trades: 6,
            ai_enabled: true,
            ai_confidence: 60,
            paper_trading: true
        };
        
        // Coins data
        const coinsData = [
            { id: 'BTC', name: 'Bitcoin', color: 'coin-btc' },
            { id: 'ETH', name: 'Ethereum', color: 'coin-eth' },
            { id: 'BNB', name: 'BNB', color: 'coin-bnb' },
            { id: 'SOL', name: 'Solana', color: 'coin-sol' },
            { id: 'XRP', name: 'Ripple', color: 'coin-xrp' },
            { id: 'ADA', name: 'Cardano', color: 'coin-ada' },
            { id: 'DOGE', name: 'Doge', color: 'coin-doge' },
            { id: 'LINK', name: 'Chainlink', color: 'coin-link' },
            { id: 'AVAX', name: 'Avalanche', color: 'coin-avax' }
        ];
        
        // Initialize
        function init() {
            loadSettings();
            renderCoins();
            updateAllSliders();
        }
        
        // Load settings from server
        async function loadSettings() {
            try {
                const resp = await fetch('/api/settings');
                if (resp.ok) {
                    const data = await resp.json();
                    settings = { ...settings, ...data };
                    applySettings();
                }
            } catch (e) {
                console.log('Using default settings');
            }
        }
        
        // Apply settings to UI
        function applySettings() {
            // API
            document.getElementById('api-key').value = settings.bybit_api_key || '';
            document.getElementById('api-secret').value = settings.bybit_api_secret || '';
            updateApiStatus();
            
            // Network
            setNetwork(settings.bybit_testnet ? 'testnet' : 'mainnet', false);
            
            // Coins
            renderCoins();
            
            // Sliders
            document.getElementById('risk-slider').value = settings.risk_percent;
            document.getElementById('trades-slider').value = settings.max_trades;
            document.getElementById('confidence-slider').value = settings.ai_confidence;
            updateAllSliders();
            
            // AI
            setAI(settings.ai_enabled, false);
            
            // Mode
            setMode(settings.paper_trading ? 'paper' : 'live', false);
        }
        
        // Toggle card open/close
        function toggleCard(id) {
            const card = document.getElementById('card-' + id);
            card.classList.toggle('open');
        }
        
        // Toggle password visibility
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            input.type = input.type === 'password' ? 'text' : 'password';
        }
        
        // Update API status badge
        function updateApiStatus() {
            const key = document.getElementById('api-key').value;
            const secret = document.getElementById('api-secret').value;
            const status = document.getElementById('api-status');
            
            if (key && secret && key.length > 10 && secret.length > 10) {
                status.textContent = '‚úì –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ';
                status.className = 'status-badge success';
            } else if (key || secret) {
                status.textContent = '–ù–µ–ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ';
                status.className = 'status-badge warning';
            } else {
                status.textContent = '–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ';
                status.className = 'status-badge warning';
            }
        }
        
        // Set network
        function setNetwork(network, save = true) {
            const testnet = document.getElementById('btn-testnet');
            const mainnet = document.getElementById('btn-mainnet');
            
            if (network === 'testnet') {
                testnet.classList.add('active');
                mainnet.classList.remove('active');
                settings.bybit_testnet = true;
            } else {
                mainnet.classList.add('active');
                testnet.classList.remove('active');
                settings.bybit_testnet = false;
            }
        }
        
        // Render coins grid
        function renderCoins() {
            const grid = document.getElementById('coins-grid');
            let enabledCount = 0;
            
            grid.innerHTML = coinsData.map(coin => {
                const active = settings.coins[coin.id];
                if (active) enabledCount++;
                
                return `
                    <button class="coin-btn ${active ? 'active' : ''}" onclick="toggleCoin('${coin.id}')">
                        <div class="coin-icon ${coin.color}">${coin.id.charAt(0)}</div>
                        <div class="coin-name">${coin.id}</div>
                        <div class="coin-status">${active ? '‚úì –ê–∫—Ç–∏–≤–Ω–∞' : '–í—ã–∫–ª—é—á–µ–Ω–∞'}</div>
                    </button>
                `;
            }).join('');
            
            document.getElementById('coins-count').textContent = `–í—ã–±—Ä–∞–Ω–æ: ${enabledCount} –∏–∑ ${coinsData.length}`;
        }
        
        // Toggle coin
        function toggleCoin(coinId) {
            settings.coins[coinId] = !settings.coins[coinId];
            renderCoins();
        }
        
        // Update all sliders
        function updateAllSliders() {
            updateSlider('risk');
            updateSlider('trades');
            updateSlider('confidence');
        }
        
        // Update slider
        function updateSlider(type) {
            const slider = document.getElementById(type + '-slider');
            const value = parseInt(slider.value);
            const min = parseInt(slider.min);
            const max = parseInt(slider.max);
            const percent = ((value - min) / (max - min)) * 100;
            
            document.getElementById(type + '-fill').style.width = percent + '%';
            document.getElementById(type + '-thumb').style.left = percent + '%';
            
            if (type === 'risk') {
                document.getElementById('risk-value').textContent = value + '%';
                settings.risk_percent = value;
            } else if (type === 'trades') {
                document.getElementById('trades-value').textContent = value;
                settings.max_trades = value;
            } else if (type === 'confidence') {
                document.getElementById('confidence-value').textContent = value + '%';
                settings.ai_confidence = value;
            }
        }
        
        // Set AI
        function setAI(enabled, save = true) {
            const on = document.getElementById('btn-ai-on');
            const off = document.getElementById('btn-ai-off');
            
            if (enabled) {
                on.classList.add('active');
                off.classList.remove('active');
            } else {
                off.classList.add('active');
                on.classList.remove('active');
            }
            settings.ai_enabled = enabled;
        }
        
        // Set trading mode
        function setMode(mode, save = true) {
            const paper = document.getElementById('btn-paper');
            const live = document.getElementById('btn-live');
            const warning = document.getElementById('live-warning');
            const subtitle = document.getElementById('mode-subtitle');
            
            if (mode === 'paper') {
                paper.classList.add('active');
                paper.classList.remove('danger');
                live.classList.remove('active');
                live.classList.remove('danger');
                warning.classList.add('hidden');
                subtitle.textContent = 'Paper Trading';
                settings.paper_trading = true;
            } else {
                live.classList.add('active');
                live.classList.add('danger');
                paper.classList.remove('active');
                warning.classList.remove('hidden');
                subtitle.textContent = '‚ö†Ô∏è Live Trading';
                settings.paper_trading = false;
            }
        }
        
        // Start bot
        async function startBot() {
            // Collect settings
            settings.bybit_api_key = document.getElementById('api-key').value;
            settings.bybit_api_secret = document.getElementById('api-secret').value;
            
            const btn = document.getElementById('start-btn');
            btn.innerHTML = '<span class="btn-icon">‚è≥</span><span>–°–æ—Ö—Ä–∞–Ω—è—é...</span>';
            btn.disabled = true;
            
            try {
                // Save to server and request start
                const resp = await fetch('/api/start', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(settings)
                });
                
                if (resp.ok) {
                    btn.innerHTML = '<span class="btn-icon">‚úÖ</span><span>–ì–æ—Ç–æ–≤–æ! –ó–∞–∫—Ä—ã–≤–∞—é...</span>';
                    btn.style.background = 'linear-gradient(135deg, #3b82f6, #06b6d4)';
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º WebApp —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
                    setTimeout(() => {
                        tg.close();
                    }, 1000);
                } else {
                    throw new Error('Server error');
                }
                
            } catch (e) {
                btn.innerHTML = '<span class="btn-icon">üöÄ</span><span>–ó–ê–ü–£–°–¢–ò–¢–¨ –ë–û–¢–ê</span>';
                btn.disabled = false;
                btn.style.background = '';
                alert('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫');
            }
        }
        
        // Input listeners
        document.getElementById('api-key').addEventListener('input', updateApiStatus);
        document.getElementById('api-secret').addEventListener('input', updateApiStatus);
        
        // Init on load
        init();
    </script>
</body>
</html>
