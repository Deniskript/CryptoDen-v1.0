# ğŸš€ CryptoDen Trading Bot â€” ĞŸĞĞ›ĞĞĞ¯ Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢ĞĞ¦Ğ˜Ğ¯

> **Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.0  
> **Ğ”Ğ°Ñ‚Ğ°:** 2026-01-27  
> **ĞŸÑƒÑ‚ÑŒ:** `/root/crypto-bot/`  
> **Python:** 3.11+  
> **Ğ‘Ğ¸Ñ€Ğ¶Ğ°:** Bybit Spot  
> **AI:** Claude Sonnet 4 via OpenRouter

---

## ğŸ“‹ Ğ¡ĞĞ”Ğ•Ğ Ğ–ĞĞĞ˜Ğ•

1. [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
2. [Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²](#ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²)
3. [ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸](#ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ-Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸)
4. [Telegram Bot](#telegram-bot)
5. [WebApp](#webapp)
6. [AI ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°](#ai-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°)
7. [Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸](#ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸)
8. [Ğ¢Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ñ](#Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ñ)
9. [ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ](#Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ-Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ)
10. [ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ](#ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹-ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ)
11. [Troubleshooting](#troubleshooting)
12. [ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ´Ğ»Ñ AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ°](#Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°-Ğ´Ğ»Ñ-ai-Ğ°Ğ³ĞµĞ½Ñ‚Ğ°)

---

## ğŸ—ï¸ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TELEGRAM USER                             â”‚
â”‚                         â†“                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚   Telegram Bot      â”‚                         â”‚
â”‚              â”‚  (Reply Keyboard)   â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â†“                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚   WebApp (Flask)    â”‚ â† app.cryptoden.ru      â”‚
â”‚              â”‚   ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ±Ğ¾Ñ‚Ğ°    â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â†“                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚   MarketMonitor     â”‚ â† 24/7 Ñ†Ğ¸ĞºĞ»             â”‚
â”‚              â”‚   (ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 60 ÑĞµĞº)   â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â”‚                                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚         â†“               â†“               â†“                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ DirectorAIâ”‚   â”‚  WhaleAI  â”‚   â”‚ TechAI    â”‚              â”‚
â”‚   â”‚ (Ğ ĞµÑˆĞµĞ½Ğ¸Ñ) â”‚   â”‚  (Ğ Ñ‹Ğ½Ğ¾Ğº)  â”‚   â”‚(Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸)â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                         â†“                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚TradingCoordinator   â”‚                         â”‚
â”‚              â”‚  (ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ)      â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â†“                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚   TradeManager      â”‚                         â”‚
â”‚              â”‚ SL/TP/Trailing Stop â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â†“                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚   BybitClient       â”‚ â† API Bybit             â”‚
â”‚              â”‚  (Ğ˜ÑĞ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ)       â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ Ğ¤ĞĞ™Ğ›ĞĞ’

```
/root/crypto-bot/
â”‚
â”œâ”€â”€ .env                              # ğŸ”‘ API ĞºĞ»ÑÑ‡Ğ¸ (ĞĞ• Ğ’ GIT!)
â”œâ”€â”€ .gitignore                        # Git ignore
â”œâ”€â”€ .cursorrules                      # ğŸ“š Ğ­Ğ¢Ğ Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢ĞĞ¦Ğ˜Ğ¯
â”œâ”€â”€ requirements.txt                  # Python Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”œâ”€â”€ README.md                         # ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ
â”‚
â”œâ”€â”€ app/                              # ğŸš€ Ğ“Ğ›ĞĞ’ĞĞ«Ğ™ ĞœĞĞ”Ğ£Ğ›Ğ¬
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                       # Ğ¢ĞĞ§ĞšĞ Ğ’Ğ¥ĞĞ”Ğ
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                         # âš™ï¸ Ğ¯Ğ”Ğ Ğ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py                 # Pydantic Settings
â”‚   â”‚   â”œâ”€â”€ constants.py              # ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ database.py               # Redis/PostgreSQL
â”‚   â”‚   â”œâ”€â”€ logger.py                 # Loguru
â”‚   â”‚   â””â”€â”€ monitor.py                # ğŸ”„ MarketMonitor
â”‚   â”‚
â”‚   â”œâ”€â”€ strategies/                   # ğŸ“Š Ğ¡Ğ¢Ğ ĞĞ¢Ğ•Ğ“Ğ˜Ğ˜
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py                 # BEST_STRATEGIES + SHORT_STRATEGIES
â”‚   â”‚   â”œâ”€â”€ checker.py                # StrategyChecker
â”‚   â”‚   â”œâ”€â”€ indicators.py             # TechnicalIndicators
â”‚   â”‚   â””â”€â”€ signals.py                # Signal dataclass
â”‚   â”‚
â”‚   â”œâ”€â”€ trading/                      # ğŸ’° Ğ¢ĞĞ Ğ“ĞĞ’Ğ›Ğ¯
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ trade_manager.py          # TradeManager + Trade
â”‚   â”‚   â”œâ”€â”€ position_calculator.py    # Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹
â”‚   â”‚   â”œâ”€â”€ risk_manager.py           # Ğ Ğ¸ÑĞºĞ¸
â”‚   â”‚   â””â”€â”€ bybit/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ client.py             # BybitClient
â”‚   â”‚       â”œâ”€â”€ orders.py             # ĞÑ€Ğ´ĞµÑ€Ğ°
â”‚   â”‚       â””â”€â”€ account.py            # Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ
â”‚   â”‚
â”‚   â”œâ”€â”€ intelligence/                 # ğŸ§  NEWS AI
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ news_parser.py            # NewsParser
â”‚   â”‚   â”œâ”€â”€ ai_client.py              # OpenRouter API
â”‚   â”‚   â”œâ”€â”€ sentiment.py              # Sentiment
â”‚   â”‚   â”œâ”€â”€ market_state.py           # Market Mode
â”‚   â”‚   â””â”€â”€ calendar.py               # ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ
â”‚   â”‚
â”‚   â”œâ”€â”€ brain/                        # ğŸ¤– TRADING AI
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ trading_ai.py             # TradingAI (Claude Sonnet)
â”‚   â”‚
â”‚   â”œâ”€â”€ ai/                           # ğŸ‹ AI ĞĞ“Ğ•ĞĞ¢Ğ«
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ whale_ai.py               # WhaleAI (OI, Funding, Ğ›Ğ¸ĞºĞ²Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸)
â”‚   â”‚   â”œâ”€â”€ director_ai.py            # DirectorAI (Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ)
â”‚   â”‚   â””â”€â”€ trading_coordinator.py    # TradingCoordinator
â”‚   â”‚
â”‚   â”œâ”€â”€ parsers/                      # ğŸ“° ĞŸĞĞ Ğ¡Ğ•Ğ Ğ«
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ twitter_parser.py         # Nitter (Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚)
â”‚   â”‚   â”œâ”€â”€ rss_parser.py             # RSS Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚Ğ¸
â”‚   â”‚   â””â”€â”€ coinglass_parser.py       # Ğ›Ğ¸ĞºĞ²Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸, OI
â”‚   â”‚
â”‚   â”œâ”€â”€ notifications/                # ğŸ“± TELEGRAM
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ telegram_bot.py           # TelegramBot
â”‚   â”‚
â”‚   â”œâ”€â”€ bot/                          # ğŸ›ï¸ KEYBOARDS
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ keyboards.py              # get_main_keyboard()
â”‚   â”‚
â”‚   â”œâ”€â”€ backtesting/                  # ğŸ“ˆ Ğ‘Ğ­ĞšĞ¢Ğ•Ğ¡Ğ¢
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ data_loader.py            # BybitDataLoader
â”‚   â”‚   â”œâ”€â”€ backtest_engine.py        # BacktestEngine
â”‚   â”‚   â”œâ”€â”€ strategies.py             # 140+ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¹
â”‚   â”‚   â”œâ”€â”€ optimizer.py              # ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ reports.py                # ĞÑ‚Ñ‡Ñ‘Ñ‚Ñ‹
â”‚   â”‚   â””â”€â”€ leverage_backtest.py      # ğŸ†• Ğ¡ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸ÑĞ¼Ğ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ backtest/                     # SHORT Ğ‘Ğ­ĞšĞ¢Ğ•Ğ¡Ğ¢Ğ«
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ short_backtest_2025.py
â”‚   â”‚   â””â”€â”€ combo_short_backtest.py
â”‚   â”‚
â”‚   â”œâ”€â”€ debug/                        # ğŸ”§ Ğ”Ğ˜ĞĞ“ĞĞĞ¡Ğ¢Ğ˜ĞšĞ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ diagnose.py               # ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°
â”‚   â”‚   â””â”€â”€ test_parsers.py           # Ğ¢ĞµÑÑ‚ Ğ¿Ğ°Ñ€ÑĞµÑ€Ğ¾Ğ²
â”‚   â”‚
â”‚   â””â”€â”€ webapp/                       # ğŸŒ FLASK
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ server.py                 # Flask app
â”‚       â””â”€â”€ templates/
â”‚           â””â”€â”€ webapp.html           # Telegram WebApp UI
â”‚
â”œâ”€â”€ data/                             # ğŸ“ Ğ”ĞĞĞĞ«Ğ•
â”‚   â”œâ”€â”€ *.json                        # ĞšÑÑˆ ÑĞ²ĞµÑ‡ĞµĞ¹
â”‚   â”œâ”€â”€ *.parquet                     # ĞšÑÑˆ Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ°
â”‚   â”œâ”€â”€ bot_status.json               # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ´Ğ»Ñ WebApp
â”‚   â””â”€â”€ start_requested.json          # Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ ÑÑ‚Ğ°Ñ€Ñ‚Ğ°
â”‚
â”œâ”€â”€ reports/                          # ğŸ“Š ĞĞ¢Ğ§ĞĞ¢Ğ«
â”‚   â””â”€â”€ *.json
â”‚
â”œâ”€â”€ logs/                             # ğŸ“ Ğ›ĞĞ“Ğ˜
â”‚
â”œâ”€â”€ scripts/                          # ğŸ› ï¸ Ğ£Ğ¢Ğ˜Ğ›Ğ˜Ğ¢Ğ«
â”‚   â”œâ”€â”€ run_backtest.py
â”‚   â”œâ”€â”€ download_data.py
â”‚   â”œâ”€â”€ check_system.py
â”‚   â””â”€â”€ healthcheck.sh
â”‚
â””â”€â”€ tests/                            # ğŸ§ª Ğ¢Ğ•Ğ¡Ğ¢Ğ«
```

---

## ğŸ”§ ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞœĞĞ”Ğ£Ğ›Ğ˜

### 1ï¸âƒ£ app/main.py â€” Ğ¢ĞĞ§ĞšĞ Ğ’Ğ¥ĞĞ”Ğ

```python
# Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ 3 Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾:
async def main():
    # 1. Telegram Bot polling
    bot_task = telegram_bot.start_polling()
    
    # 2. Flask WebApp Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ 5000
    webapp_task = run_webapp()
    
    # 3. MarketMonitor ĞĞ• Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
    #    Ğ–Ğ´Ñ‘Ñ‚ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ /run Ğ¸Ğ»Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ² WebApp
    
    await asyncio.gather(bot_task, webapp_task)

# Ğ—Ğ°Ğ¿ÑƒÑĞº:
# python -m app.main
# supervisorctl start crypto-bot
```

### 2ï¸âƒ£ app/core/monitor.py â€” Ğ“Ğ›ĞĞ’ĞĞ«Ğ™ Ğ¦Ğ˜ĞšĞ›

```python
class MarketMonitor:
    """
    24/7 Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ñ€Ñ‹Ğ½ĞºĞ°
    
    ĞÑ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹:
    - running: bool = False
    - check_interval: int = 60  # ÑĞµĞºÑƒĞ½Ğ´
    - paper_trading: bool = True
    - current_balance: float = 1000.0
    - balance_percent_per_trade: float = 0.15  # 15%
    - max_open_trades: int = 6
    - ai_enabled: bool = True
    - min_confidence: int = 60
    - symbols: List[str] = []
    
    Ğ¦Ğ¸ĞºĞ» _main_cycle() ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 60 ÑĞµĞº:
    1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ½Ñ‹: await self.bybit.get_prices(symbols)
    2. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚Ğ¸ (Ñ€Ğ°Ğ· Ğ² 5 Ğ¼Ğ¸Ğ½)
    3. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑĞ´ĞµĞ»ĞºĞ¸: trade_manager.update_prices(prices)
    4. AI Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸: _check_active_positions_with_ai()
    5. Ğ˜Ñ‰ĞµĞ¼ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹: _check_for_signals()
    
    ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    - start() â†’ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
    - stop() â†’ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ
    - get_trade_size() â†’ 15% Ğ¾Ñ‚ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°
    - can_open_new_trade() â†’ (bool, reason)
    - update_balance_after_close(pnl) â†’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
market_monitor = MarketMonitor()
```

### 3ï¸âƒ£ app/strategies/config.py â€” ĞšĞĞĞ¤Ğ˜Ğ“ Ğ¡Ğ¢Ğ ĞĞ¢Ğ•Ğ“Ğ˜Ğ™

```python
@dataclass
class StrategyConfig:
    id: str
    name: str
    symbol: str
    direction: str  # "LONG" | "SHORT"
    conditions: List[Dict]
    tp_percent: float = 0.5
    sl_percent: float = 0.5
    win_rate_2024: float = 0.0
    avg_win_rate: float = 0.0
    enabled: bool = True
    max_signals_per_day: int = 3

# LONG ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ (9 ÑˆÑ‚):
BEST_STRATEGIES = {
    "BTC": StrategyConfig(
        name="RSI(14) < 30 + Price > EMA(21)",
        direction="LONG",
        conditions=[
            {"indicator": "rsi", "period": 14, "operator": "<", "value": 30},
            {"indicator": "price_vs_ema", "period": 21, "operator": ">", "value": 0},
        ],
        win_rate_2024=65.7,
    ),
    "ETH": StrategyConfig(...),
    "BNB": StrategyConfig(...),
    "SOL": StrategyConfig(...),  # SHORT!
    "XRP": StrategyConfig(...),  # SHORT!
    "ADA": StrategyConfig(...),
    "DOGE": StrategyConfig(...),
    "LINK": StrategyConfig(...),
    "AVAX": StrategyConfig(...),
}

# SHORT ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ (8 ÑˆÑ‚):
SHORT_STRATEGIES = {
    "BTC_SHORT": StrategyConfig(
        name="Stoch Reversal Short",
        direction="SHORT",
        conditions=[
            {"indicator": "stoch_k", "operator": ">", "value": 80},
            {"indicator": "stoch_cross_down", "value": True},
        ],
    ),
    # ETH_SHORT, SOL_SHORT, ADA_SHORT, LINK_SHORT, AVAX_SHORT, BNB_SHORT
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:
get_strategy(symbol) â†’ StrategyConfig
get_all_strategies() â†’ Dict[str, StrategyConfig]  # LONG + SHORT
get_enabled_strategies() â†’ Dict[str, StrategyConfig]
```

### 4ï¸âƒ£ app/strategies/checker.py â€” ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ Ğ¡Ğ˜Ğ“ĞĞĞ›ĞĞ’

```python
@dataclass
class Signal:
    symbol: str
    direction: str
    strategy_id: str
    strategy_name: str
    entry_price: float
    stop_loss: float
    take_profit: float
    indicators: Dict[str, float]
    win_rate: float
    confidence: float
    timestamp: datetime
    expires_at: datetime

class StrategyChecker:
    """
    ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
    
    Ğ›Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹:
    - max_signals_per_day: 3 Ğ½Ğ° Ğ¼Ğ¾Ğ½ĞµÑ‚Ñƒ
    - min_time_between_signals: 60 Ğ¼Ğ¸Ğ½
    - max_total_signals_per_day: 15
    
    ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    - check_symbol(symbol, df, price) â†’ Optional[Signal]
    - check_all_symbols(market_data) â†’ List[Signal]
    - get_status() â†’ dict
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
strategy_checker = StrategyChecker()
```

### 5ï¸âƒ£ app/strategies/indicators.py â€” Ğ˜ĞĞ”Ğ˜ĞšĞĞ¢ĞĞ Ğ«

```python
class TechnicalIndicators:
    @staticmethod
    def rsi(series, period=14) â†’ float
    
    @staticmethod
    def ema(series, period) â†’ float
    
    @staticmethod
    def sma(series, period) â†’ float
    
    @staticmethod
    def stochastic_k(df, period=14) â†’ float
    
    @staticmethod
    def macd(series, fast=12, slow=26, signal=9) â†’ (macd, signal, histogram)
    
    @staticmethod
    def macd_cross_direction(series) â†’ Optional[str]  # "up" | "down"
    
    @staticmethod
    def bollinger_bands(series, period=20, std=2.0) â†’ (upper, mid, lower)
    
    @staticmethod
    def atr(df, period=14) â†’ float
```

### 6ï¸âƒ£ app/trading/trade_manager.py â€” Ğ¡Ğ”Ğ•Ğ›ĞšĞ˜

```python
class TradeStatus(Enum):
    PENDING = "pending"
    OPEN = "open"
    CLOSED = "closed"
    CANCELLED = "cancelled"

class CloseReason(Enum):
    TAKE_PROFIT = "take_profit"
    STOP_LOSS = "stop_loss"
    TRAILING_STOP = "trailing_stop"
    MANUAL = "manual"
    EXPIRED = "expired"

@dataclass
class Trade:
    id: str
    symbol: str
    direction: str  # "LONG" | "SHORT"
    entry_price: float
    current_price: float
    stop_loss: float
    take_profit: float
    
    # Trailing Stop:
    trailing_stop_enabled: bool = True
    trailing_stop_percent: float = 0.3  # ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ÑĞ»Ğµ +0.3%
    trailing_stop_distance: float = 0.2  # Ğ”Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ 0.2%
    highest_price: float = 0.0  # Ğ”Ğ»Ñ LONG
    lowest_price: float = inf   # Ğ”Ğ»Ñ SHORT
    trailing_stop_price: Optional[float] = None
    
    # P&L:
    unrealized_pnl: float = 0.0
    unrealized_pnl_percent: float = 0.0
    
    # ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    update_price(new_price)  # ĞŸĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ P&L + trailing
    should_close() â†’ Optional[CloseReason]

class TradeManager:
    """
    Ğ›Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹:
    - max_trades_per_symbol: 1
    - max_total_trades: 6
    - default_trade_value: 15% Ğ¾Ñ‚ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°
    
    ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    - open_trade(signal, value) â†’ Trade
    - close_trade(trade_id, reason) â†’ Trade
    - update_prices(prices) â†’ List[Trade]  # Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ
    - get_active_trades() â†’ List[Trade]
    - get_statistics() â†’ dict
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
trade_manager = TradeManager()
```

### 7ï¸âƒ£ app/trading/bybit/client.py â€” BYBIT API

```python
class BybitClient:
    """
    Bybit V5 API ĞºĞ»Ğ¸ĞµĞ½Ñ‚
    
    Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:
    - api_key, api_secret Ğ¸Ğ· settings
    - testnet: bool
    - base_url: https://api.bybit.com Ğ¸Ğ»Ğ¸ testnet
    
    ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹:
    - get_price(symbol) â†’ float
    - get_prices(symbols) â†’ Dict[str, float]
    - get_all_spot_prices() â†’ Dict[str, float]
    
    ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ (Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ ĞºĞ»ÑÑ‡Ğ¸):
    - get_balance(coin) â†’ float
    - get_all_balances() â†’ Dict[str, float]
    - market_buy(symbol, quote_qty) â†’ dict
    - market_sell(symbol, base_qty) â†’ dict
    - get_order(order_id) â†’ dict
    - get_open_orders(symbol) â†’ List[dict]
    - cancel_order(order_id) â†’ dict
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
bybit_client = BybitClient()
```

---

## ğŸ“± TELEGRAM BOT

### Ğ¤Ğ°Ğ¹Ğ»: app/notifications/telegram_bot.py

```python
class TelegramBot:
    """
    Telegram Ğ±Ğ¾Ñ‚ Ñ Reply Keyboard
    
    ĞÑ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹:
    - bot: aiogram.Bot
    - dp: aiogram.Dispatcher
    - admin_id: int (Ğ¸Ğ· settings)
    - _monitor: MarketMonitor
    - _trade_manager: TradeManager
    """
```

### ĞšĞĞœĞĞĞ”Ğ«:

| ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ |
|---------|----------|---------|
| `/start` | Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | `cmd_start()` |
| `/help` | ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ | `cmd_help()` |
| `/debug` | Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° | `cmd_debug()` |
| `/whale` | Whale AI | `cmd_whale()` |
| `/director` | Director AI | `cmd_director()` |
| `/director_trades` | Ğ¡Ğ´ĞµĞ»ĞºĞ¸ Director | `cmd_director_trades()` |
| `/market` | ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ€Ñ‹Ğ½Ğ¾Ğº | `cmd_market()` |
| `/ai` | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ AI ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ | `cmd_ai_status()` |

### REPLY KEYBOARD ĞšĞĞĞŸĞšĞ˜:

| ĞšĞ½Ğ¾Ğ¿ĞºĞ° | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ | Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ |
|--------|----------|---------|
| ğŸ› ĞŸĞ°Ğ½ĞµĞ»ÑŒ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ | ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ WebApp | `WebAppInfo(url=...)` |
| ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ¾Ñ‚Ğ° | `btn_status()` |
| ğŸ“ˆ Ğ¡Ğ´ĞµĞ»ĞºĞ¸ | ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑĞ´ĞµĞ»ĞºĞ¸ | `btn_trades()` |
| ğŸ“° ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸ | ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸ Ñ€Ñ‹Ğ½ĞºĞ° | `btn_news()` |
| ğŸ“‹ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ | Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ ÑĞ´ĞµĞ»ĞºĞ¸ | `btn_history()` |
| â“ ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ | Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ | `btn_help()` |

### WEBAPP DATA HANDLER:

```python
@self.dp.message(F.web_app_data)
async def handle_webapp_data(message):
    data = json.loads(message.web_app_data.data)
    action = data.get('action')
    
    if action == 'start_bot':
        settings_data = data.get('settings', {})
        self._apply_settings(settings_data)
        await self.monitor.start()
    
    elif action == 'stop_bot':
        await self.monitor.stop()
    
    elif action == 'update_settings':
        self._apply_settings(data.get('settings', {}))
```

### Ğ£Ğ’Ğ•Ğ”ĞĞœĞ›Ğ•ĞĞ˜Ğ¯:

```python
# ĞœĞµÑ‚Ğ¾Ğ´Ñ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸:
await telegram_bot.send_message(text)
await telegram_bot.notify_signal(signal)
await telegram_bot.notify_trade_opened(trade)
await telegram_bot.notify_trade_closed(trade)
await telegram_bot.notify_ai_decision(decision)
await telegram_bot.notify_error(error)
```

---

## ğŸŒ WEBAPP

### URL: https://app.cryptoden.ru

### Ğ¤Ğ°Ğ¹Ğ»: app/webapp/server.py

```python
# Flask Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
app = Flask(__name__)

# Endpoints:
@app.route('/')  # GET â†’ webapp.html
@app.route('/api/bot-status')  # GET â†’ JSON ÑÑ‚Ğ°Ñ‚ÑƒÑ
@app.route('/api/start', methods=['POST'])  # Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ±Ğ¾Ñ‚Ğ°
@app.route('/api/stop', methods=['POST'])  # ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ±Ğ¾Ñ‚Ğ°
@app.route('/api/settings')  # GET â†’ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
```

### Ğ¤Ğ°Ğ¹Ğ»: app/webapp/templates/webapp.html

### Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ UI:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ¤– CryptoDen               â”‚
â”‚      Professional AI Trading Bot        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ğŸ”´/ğŸŸ¢ Ğ‘ĞĞ¢ ĞĞ¡Ğ¢ĞĞĞĞ’Ğ›Ğ•Ğ/Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢  â”‚   â”‚
â”‚   â”‚  ğŸ’° $1,000 | ğŸ“Š 0 ÑĞ´ĞµĞ»Ğ¾Ğº        â”‚   â”‚
â”‚   â”‚                                 â”‚   â”‚
â”‚   â”‚  [ğŸš€ Ğ—ĞĞŸĞ£Ğ¡Ğ¢Ğ˜Ğ¢Ğ¬ / ğŸ›‘ ĞĞ¡Ğ¢ĞĞĞĞ’Ğ˜Ğ¢Ğ¬] â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ API ĞšĞ»ÑÑ‡Ğ¸ (â–¼ Ñ€Ğ°ÑĞºÑ€Ñ‹Ñ‚ÑŒ)               â”‚
â”‚   â€¢ API Key: [____________]             â”‚
â”‚   â€¢ Secret: [____________]              â”‚
â”‚   â€¢ [ğŸ§ª Testnet] [ğŸ’° Mainnet]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ ĞœĞ¾Ğ½ĞµÑ‚Ñ‹ (â–¼)                           â”‚
â”‚   [BTC âœ“] [ETH âœ“] [BNB âœ“]               â”‚
â”‚   [SOL âœ“] [XRP âœ“] [ADA âœ“]               â”‚
â”‚   [DOGEâœ“] [LINKâ€”] [AVAXâ€”]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€Ğ¸ÑĞºĞ°Ğ¼Ğ¸ (â–¼)               â”‚
â”‚   Ğ Ğ°Ğ·Ğ¼ĞµÑ€ ÑĞ´ĞµĞ»ĞºĞ¸: [====â—====] 15%        â”‚
â”‚   ĞœĞ°ĞºÑ. ÑĞ´ĞµĞ»Ğ¾Ğº:  [====â—====] 6          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ AI ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ (â–¼)                     â”‚
â”‚   [âœ… AI Ğ’ĞºĞ»ÑÑ‡Ñ‘Ğ½] [âŒ Ğ‘ĞµĞ· AI]           â”‚
â”‚   ĞœĞ¸Ğ½. ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ: [===â—===] 60%       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‚ Ğ ĞµĞ¶Ğ¸Ğ¼ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ğ¸ (â–¼)                   â”‚
â”‚   [ğŸ“ Paper âœ“] [ğŸ’° Live]                â”‚
â”‚   âš ï¸ LIVE Ñ€ĞµĞ¶Ğ¸Ğ¼ Ñ‚Ğ¾Ñ€Ğ³ÑƒĞµÑ‚ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ $!    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### JS Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜:

```javascript
// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ±Ğ¾Ñ‚Ğ°
async function checkBotStatus() {
    const resp = await fetch('/api/bot-status');
    const data = await resp.json();
    botRunning = data.running;
    updateControlCard();
}

// ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI
function updateControlCard() {
    if (botRunning) {
        // Ğ—ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€
        // ĞšĞ½Ğ¾Ğ¿ĞºĞ° "ĞĞ¡Ğ¢ĞĞĞĞ’Ğ˜Ğ¢Ğ¬" (ĞºÑ€Ğ°ÑĞ½Ğ°Ñ)
        // Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    } else {
        // ĞšÑ€Ğ°ÑĞ½Ñ‹Ğ¹ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€
        // ĞšĞ½Ğ¾Ğ¿ĞºĞ° "Ğ—ĞĞŸĞ£Ğ¡Ğ¢Ğ˜Ğ¢Ğ¬" (Ğ·ĞµĞ»Ñ‘Ğ½Ğ°Ñ)
        // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    }
}

// Ğ—Ğ°Ğ¿ÑƒÑĞº/Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
async function handleMainAction() {
    if (botRunning) {
        await fetch('/api/stop', { method: 'POST' });
    } else {
        await fetch('/api/start', {
            method: 'POST',
            body: JSON.stringify(settings)
        });
    }
    tg.close();
}
```

---

## ğŸ¤– AI Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ

### Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DIRECTOR AI (Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€)        â”‚
â”‚           ğŸ© Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ     â”‚
â”‚                                         â”‚
â”‚   Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:                       â”‚
â”‚   - Whale AI Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸                    â”‚
â”‚   - News AI ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚                    â”‚
â”‚   - ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸                    â”‚
â”‚                                         â”‚
â”‚   Ğ’Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:                     â”‚
â”‚   - CONTINUE (Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°Ñ‚ÑŒ)               â”‚
â”‚   - CLOSE_ALL (Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ²ÑÑ‘)             â”‚
â”‚   - CLOSE_LONGS (Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ»Ğ¾Ğ½Ğ³Ğ¸)         â”‚
â”‚   - CLOSE_SHORTS (Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ ÑˆĞ¾Ñ€Ñ‚Ñ‹)        â”‚
â”‚   - PAUSE_NEW (Ğ½Ğµ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğµ)      â”‚
â”‚   - TAKE_CONTROL (Ñ€ÑƒÑ‡Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           WHALE AI (Ğ”Ñ€ÑƒĞ³)               â”‚
â”‚           ğŸ‹ Ğ Ñ‹Ğ½Ğ¾Ñ‡Ğ½Ğ°Ñ Ñ€Ğ°Ğ·Ğ²ĞµĞ´ĞºĞ°          â”‚
â”‚                                         â”‚
â”‚   ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸:                              â”‚
â”‚   - Open Interest (OI)                  â”‚
â”‚   - Funding Rate                        â”‚
â”‚   - Long/Short Ratio                    â”‚
â”‚   - Fear & Greed Index                  â”‚
â”‚   - Ğ›Ğ¸ĞºĞ²Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸                          â”‚
â”‚                                         â”‚
â”‚   Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸:                            â”‚
â”‚   - Bybit API                           â”‚
â”‚   - Coinglass (fallback)                â”‚
â”‚   - Alternative.me (F&G)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           TECH AI (Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸Ğº)            â”‚
â”‚           ğŸ“Š Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·         â”‚
â”‚                                         â”‚
â”‚   - StrategyChecker                     â”‚
â”‚   - RSI, EMA, MACD, Stoch               â”‚
â”‚   - Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           TRADING AI (Brain)            â”‚
â”‚           ğŸ§  Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ          â”‚
â”‚                                         â”‚
â”‚   ĞœĞ¾Ğ´ĞµĞ»ÑŒ: Claude Sonnet 4               â”‚
â”‚   Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:                             â”‚
â”‚   - OPEN_LONG                           â”‚
â”‚   - OPEN_SHORT                          â”‚
â”‚   - CLOSE                               â”‚
â”‚   - ADJUST_SL                           â”‚
â”‚   - ADJUST_TP                           â”‚
â”‚   - WAIT                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### app/ai/whale_ai.py

```python
class WhaleAI:
    """
    ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ ĞºĞ¸Ñ‚Ğ¾Ğ² Ğ¸ Ñ€Ñ‹Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ñ… Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº
    
    ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    - get_market_metrics(symbol) â†’ MarketMetrics
    - analyze(metrics) â†’ WhaleAlert
    - get_status_text() â†’ str (Ğ´Ğ»Ñ Telegram)
    - get_trading_bias() â†’ "BULLISH" | "BEARISH" | "NEUTRAL"
    
    AlertLevel:
    - CALM (ÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ğ¾)
    - ATTENTION (Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ)
    - WARNING (Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ)
    - CRITICAL (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾)
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
whale_ai = WhaleAI()
```

### app/ai/director_ai.py

```python
class DirectorAI:
    """
    Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ
    
    TradingMode:
    - AUTO (Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚)
    - SUPERVISED (Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ)
    - MANUAL (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ)
    - PAUSED (Ğ¿Ğ°ÑƒĞ·Ğ°)
    
    DirectorDecision:
    - CONTINUE
    - CLOSE_ALL
    - CLOSE_LONGS
    - CLOSE_SHORTS
    - PAUSE_NEW
    - TAKE_CONTROL
    - AGGRESSIVE_LONG
    - AGGRESSIVE_SHORT
    
    ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    - analyze_situation() â†’ MarketSituation
    - make_decision() â†’ DirectorCommand
    - get_status_text() â†’ str
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
director_ai = DirectorAI()


class DirectorTrader:
    """
    ğŸ© Director ĞºĞ°Ğº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ñ‚Ñ€ĞµĞ¹Ğ´ĞµÑ€ (TAKE_CONTROL)
    
    ĞœĞ¾Ğ¶ĞµÑ‚ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¡ĞĞœ, Ğ±ĞµĞ· Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ½Ğ¸ĞºĞ°!
    
    Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ TAKE_CONTROL:
    - Fear & Greed < 20 + Ğ±Ñ‹Ñ‡ÑŒĞ¸ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚Ğ¸ â†’ LONG
    - Fear & Greed > 80 + Ğ¼ĞµĞ´Ğ²ĞµĞ¶ÑŒĞ¸ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚Ğ¸ â†’ SHORT
    - ĞœĞ°ÑÑĞ¾Ğ²Ñ‹Ğµ Ğ»Ğ¸ĞºĞ²Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ»Ğ¾Ğ½Ğ³Ğ¾Ğ² ($50M+) â†’ LONG
    - ĞœĞ°ÑÑĞ¾Ğ²Ñ‹Ğµ Ğ»Ğ¸ĞºĞ²Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ ÑˆĞ¾Ñ€Ñ‚Ğ¾Ğ² ($50M+) â†’ SHORT
    - Funding > 0.1% + Long Ratio > 70% â†’ SHORT
    - Funding < -0.1% + Long Ratio < 30% â†’ LONG
    - Extreme Fear (<15) + Ğ¼Ğ°Ğ»Ğ¾ Ğ»Ğ¾Ğ½Ğ³Ğ¾Ğ² (<35%) â†’ LONG
    
    ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    - should_take_control(whale, news, market) â†’ (bool, direction, reason)
    - execute_trade(symbol, direction, reason) â†’ DirectorTrade
    - _manage_trade(trade) â†’ Ñ†Ğ¸ĞºĞ» ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞº
    - _update_trailing_stop(trade, price) â†’ Ğ¿ĞµÑ€ĞµĞ´Ğ²Ğ¸Ğ³Ğ°ĞµÑ‚ SL
    - _check_news_exit(trade) â†’ Ğ²Ñ‹Ñ…Ğ¾Ğ´ Ğ¿Ğ¾ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚ÑĞ¼
    - _check_whale_exit(trade) â†’ Ğ²Ñ‹Ñ…Ğ¾Ğ´ Ğ¿Ğ¾ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ°Ğ¼
    - close_all_director_trades(reason)
    - get_status() â†’ dict
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
director_trader = DirectorTrader()
```

### app/ai/trading_coordinator.py

```python
class TradingCoordinator:
    """
    ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
    
    ĞÑ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ñ‹:
    - signals_generated: int
    - actions_executed: int
    - director_interventions: int
    
    ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    - run_cycle() â†’ List[TradingAction]
    - filter_signal(signal, guidance) â†’ (bool, reason)
    - check_for_close_orders(guidance) â†’ List[TradingAction]
    - execute_close_action(action) â†’ bool
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
trading_coordinator = TradingCoordinator()
```

### app/brain/trading_ai.py

```python
class TradingAI:
    """
    Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Claude
    
    ĞœĞ¾Ğ´ĞµĞ»ÑŒ: anthropic/claude-sonnet-4
    Ğ§ĞµÑ€ĞµĞ·: OpenRouter API
    
    ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:
    - analyze(symbol, market_context, strategy_signal,
              current_position, price_data, current_price) â†’ AIDecision
    - should_adjust_position(symbol, position, 
                            market_context, current_price) â†’ AIDecision
    
    AIAction:
    - OPEN_LONG
    - OPEN_SHORT
    - CLOSE
    - ADJUST_SL
    - ADJUST_TP
    - WAIT
    
    AIDecision:
    - action: AIAction
    - direction: str
    - confidence: int (0-100)
    - reason: str
    - stop_loss: Optional[float]
    - take_profit: Optional[float]
    - size_multiplier: float
    """

# Ğ¡Ğ¸Ğ½Ğ³Ğ»Ñ‚Ğ¾Ğ½:
trading_ai = TradingAI()
```

---

## ğŸ“Š Ğ¡Ğ¢Ğ ĞĞ¢Ğ•Ğ“Ğ˜Ğ˜

### LONG ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸:

| ĞœĞ¾Ğ½ĞµÑ‚Ğ° | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ | Win Rate |
|--------|---------|----------|
| BTC | RSI(14) < 30 + Price > EMA(21) | 65.7% |
| ETH | RSI(14) < 35 + Price > EMA(50) | 63.4% |
| BNB | RSI < 30 + Price > EMA50 + Volume | 74.4% |
| ADA | RSI(14) < 30 + Price > EMA(21) | 73.2% |
| DOGE | Stoch(14) < 25 + MACD Cross Up | 70.0% |
| LINK | RSI(14) < 30 + Price > EMA(50) | 68.3% |
| AVAX | RSI(14) < 30 + Price > EMA(21) | 73.7% |

### SHORT ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ (SOL, XRP):

| ĞœĞ¾Ğ½ĞµÑ‚Ğ° | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ | Win Rate |
|--------|---------|----------|
| SOL | RSI(21) > 80 | 66.2% |
| XRP | RSI(14) > 80 | 64.1% |

### Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ SHORT:

| ID | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ |
|----|---------|
| STOCH_REVERSAL | Stoch K > 80 + crossing down |
| STOCH_EMA_RSI | Stoch > 75 + Price < EMA50 + RSI > 65 |
| STOCH_MACD | Stoch > 80 + MACD hist < 0 |

---

## ğŸ’° Ğ¢ĞĞ Ğ“ĞĞ’Ğ›Ğ¯

### ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ°:

```
âœ… Ğ Ğ°Ğ·Ğ¼ĞµÑ€ ÑĞ´ĞµĞ»ĞºĞ¸ = 15% Ğ¾Ñ‚ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°
âœ… ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 6 Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ñ… ÑĞ´ĞµĞ»Ğ¾Ğº
âœ… 1 ÑĞ´ĞµĞ»ĞºĞ° Ğ½Ğ° ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»
âœ… Paper mode Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ

ğŸ“Š Trailing Stop:
â”œâ”€â”€ ĞĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ: Ğ¿Ğ¾ÑĞ»Ğµ +0.3% Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ğ»Ğ¸
â”œâ”€â”€ Ğ”Ğ¸ÑÑ‚Ğ°Ğ½Ñ†Ğ¸Ñ: 0.2%
â””â”€â”€ Ğ”Ğ²Ğ¸Ğ³Ğ°ĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñƒ Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ğ»Ğ¸

ğŸ“Š SL/TP:
â”œâ”€â”€ Stop Loss: 0.5%
â””â”€â”€ Take Profit: 0.5%
```

### ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸ Bybit (Ğ´Ğ»Ñ Ğ±ÑĞºÑ‚ĞµÑÑ‚Ğ°):

```
â”œâ”€â”€ Taker Fee: 0.055%
â”œâ”€â”€ Maker Fee: 0.02%
â”œâ”€â”€ Funding Rate: 0.01% ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 8Ñ‡
â””â”€â”€ ĞŸÑ€Ğ¸ Ğ¿Ğ»ĞµÑ‡Ğµ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸ Ã— leverage!
```

---

## ğŸ”‘ ĞŸĞ•Ğ Ğ•ĞœĞ•ĞĞĞ«Ğ• ĞĞšĞ Ğ£Ğ–Ğ•ĞĞ˜Ğ¯

### Ğ¤Ğ°Ğ¹Ğ»: /root/crypto-bot/.env

```bash
# === TELEGRAM ===
TELEGRAM_BOT_TOKEN=7xxx:AAHxxx
ADMIN_CHAT_ID=123456789

# === BYBIT ===
BYBIT_API_KEY=xxxxxx
BYBIT_API_SECRET=xxxxxx
BYBIT_TESTNET=true

# === AI (OpenRouter) ===
OPENROUTER_API_KEY=sk-or-xxx

# === NEWS ===
CRYPTOCOMPARE_API_KEY=xxxxx
COINGECKO_API_KEY=xxxxx  # Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾

# === WEBAPP ===
WEBAPP_URL=https://app.cryptoden.ru
```

### Ğ¤Ğ°Ğ¹Ğ»: app/core/config.py

```python
class Settings(BaseSettings):
    telegram_bot_token: str
    admin_chat_id: int
    bybit_api_key: str
    bybit_api_secret: str
    bybit_testnet: bool = True
    openrouter_api_key: str
    cryptocompare_api_key: str
    coingecko_api_key: str = ""
    webapp_url: str
    ai_model: str = "anthropic/claude-sonnet-4"
    
    class Config:
        env_file = ".env"

settings = Settings()
```

---

## ğŸ› ï¸ ĞšĞĞœĞĞĞ”Ğ« Ğ£ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯

### Supervisor:

```bash
supervisorctl status              # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
supervisorctl start crypto-bot    # Ğ¡Ñ‚Ğ°Ñ€Ñ‚
supervisorctl stop crypto-bot     # Ğ¡Ñ‚Ğ¾Ğ¿
supervisorctl restart crypto-bot  # Ğ ĞµÑÑ‚Ğ°Ñ€Ñ‚
supervisorctl tail -f crypto-bot stderr  # Ğ›Ğ¾Ğ³Ğ¸
```

### Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ğ° `bot`:

```bash
bot status    # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
bot start     # Ğ¡Ñ‚Ğ°Ñ€Ñ‚
bot stop      # Ğ¡Ñ‚Ğ¾Ğ¿
bot restart   # Ğ ĞµÑÑ‚Ğ°Ñ€Ñ‚
bot logs      # Ğ›Ğ¾Ğ³Ğ¸
bot follow    # Ğ›Ğ¾Ğ³Ğ¸ Ğ² Ñ€ĞµĞ°Ğ»Ñ‚Ğ°Ğ¹Ğ¼Ğµ
bot errors    # Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
```

### Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº:

```bash
cd /root/crypto-bot
source venv/bin/activate
python -m app.main
```

### Ğ‘ÑĞºÑ‚ĞµÑÑ‚Ğ¸Ğ½Ğ³:

```bash
# ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹
python scripts/run_backtest.py --all

# Ğ¡ Ğ¿Ğ»ĞµÑ‡Ğ°Ğ¼Ğ¸ Ğ¸ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸ÑĞ¼Ğ¸
python -m app.backtesting.leverage_backtest

# SHORT ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸
python -m app.backtest.short_backtest_2025
python -m app.backtest.combo_short_backtest
```

### Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:

```bash
python -m app.debug.diagnose      # ĞŸĞ¾Ğ»Ğ½Ğ°Ñ
python -m app.debug.test_parsers  # ĞŸĞ°Ñ€ÑĞµÑ€Ñ‹
```

### Git:

```bash
git add -A
git commit -m "Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ"
git push origin main
```

---

## ğŸ”§ TROUBLESHOOTING

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: TelegramConflictError

```
Telegram server says - Conflict: terminated by other getUpdates
```

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
```bash
# ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹
pkill -f python
supervisorctl stop all

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ systemd
systemctl stop crypto-bot
systemctl disable crypto-bot

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
supervisorctl start crypto-bot
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞĞµÑ‚ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‚ ÑĞºÑÑ‚Ñ€ĞµĞ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹ (RSI < 30, Stoch > 80)

**Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:**
```bash
python -m app.debug.diagnose
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²:**
```python
# RSI Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ < 30 Ğ´Ğ»Ñ LONG
# Stoch Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ > 80 Ğ´Ğ»Ñ SHORT
# Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ Ñ€Ñ‹Ğ½Ğ¾Ğº Ğ² Ğ½ĞµĞ¹Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ·Ğ¾Ğ½Ğµ
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Nitter Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** Ğ’ÑĞµ Nitter Ğ¸Ğ½ÑÑ‚Ğ°Ğ½ÑÑ‹ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Twitter

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** Ğ­Ñ‚Ğ¾ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾, RSS Ğ¸ CryptoCompare Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸ ÑÑŠĞµĞ´Ğ°ÑÑ‚ Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ğ»ÑŒ

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** ĞŸÑ€Ğ¸ Ñ‡Ğ°ÑÑ‚Ğ¾Ğ¹ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ğµ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸ > Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ñ‚Ğ°

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
- Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ TP Ğ´Ğ¾ 1-2%
- Ğ¡Ğ½Ğ¸Ğ·Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ´ĞµĞ»Ğ¾Ğº
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¾Ñ€Ğ´ĞµÑ€Ğ° (0.02% vs 0.055%)

---

## ğŸ“ ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ Ğ”Ğ›Ğ¯ AI ĞĞ“Ğ•ĞĞ¢Ğ

### ĞŸÑ€Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ñ ĞºĞ¾Ğ´Ğ¾Ğ¼:

1. **Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ñ‹** â€” Ğ°Ğ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ñ‹Ğµ: `from app.module.file import ...`
2. **Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** â€” `from app.core.logger import logger`
3. **ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³** â€” `from app.core.config import settings`
4. **Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸** â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ² `app/strategies/config.py`
5. **Telegram** â€” Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ² `app/notifications/telegram_bot.py`

### ĞŸĞ¾ÑĞ»Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹:

```bash
# 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ
python -c "from app.main import *"

# 2. ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
supervisorctl restart crypto-bot

# 3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
supervisorctl tail -f crypto-bot stderr

# 4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ² Git
git add -A && git commit -m "Update: Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ" && git push origin main
```

### Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°:

```bash
# Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ¾Ñ‚Ğ°
supervisorctl status
cat /root/crypto-bot/data/bot_status.json

# Ğ›Ğ¾Ğ³Ğ¸
tail -50 /var/log/supervisor/crypto-bot-stderr.log

# Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸
python -c "from app.strategies.config import get_all_strategies; print(len(get_all_strategies()))"

# Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹
python -m app.debug.diagnose
```

---

## ğŸ“ Ğ¡Ğ¡Ğ«Ğ›ĞšĞ˜

- **GitHub:** https://github.com/Deniskript/CryptoDen-v1.0
- **WebApp:** https://app.cryptoden.ru
- **Bybit API:** https://bybit-exchange.github.io/docs/v5/intro
- **OpenRouter:** https://openrouter.ai/docs

---

**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** 2026-01-27 07:00 UTC
